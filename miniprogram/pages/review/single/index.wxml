<!-- pages/review/single/index.wxml -->
<view class="container">
  <!-- å¤ä¹ è¿›åº¦ -->
  <view class="progress-bar" wx:if="{{reviewList.length > 0}}">
    <text class="progress-text">{{currentIndex + 1}}/{{reviewList.length}}</text>
    <view class="progress-bg">
      <view 
        class="progress-fill" 
        wx:style="'width: ' + (currentIndex + 1)/reviewList.length*100 + '%'"
      ></view>

    </view>
  </view>

  <!-- å¤ä¹ å¡ç‰‡ -->
  <view class="review-card" wx:if="{{currentItem}}">
    <!-- å‡ºé¢˜åŒºåŸŸï¼ˆæ ¹æ®reviewTypeå†³å®šæ˜¾ç¤ºè‹±æ–‡/ä¸­æ–‡ï¼‰ -->
    <view class="question">
      <text>è¯·ç¿»è¯‘ï¼š</text>
      <text class="{{reviewType === 'en2zh' ? 'en-text' : 'zh-text'}}">
        {{reviewType === 'en2zh' ? currentItem.en : currentItem.zh}}
      </text>
    </view>

    <!-- é»˜å†™è¾“å…¥æ¡† -->
    <textarea 
      class="answer-textarea"
      placeholder="è¯·è¾“å…¥ä½ çš„ç­”æ¡ˆï¼ˆå¯ç©ºï¼‰"
      value="{{userAnswer}}"
      bindinput="inputAnswer"
      auto-height
    ></textarea>

    <!-- æ ¸å¿ƒæ“ä½œæŒ‰é’®ï¼šé»˜å†™å·²å®Œæˆ -->
    <button 
      class="complete-btn" 
      bindtap="completeReview"
      loading="{{isSubmitting}}"
    >
      é»˜å†™å·²å®Œæˆ
    </button>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-tip" wx:if="{{isLoading && !currentItem}}">
    <view class="loading-spinner"></view>
    <text>æ­£åœ¨ç”Ÿæˆå¤ä¹ é¢˜åº“...</text>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view class="empty-tip" wx:if="{{!isLoading && reviewList.length === 0 && !currentItem}}">
    <text>æš‚æ— å¤ä¹ å†…å®¹</text>
    <button class="back-btn" bindtap="goBack">è¿”å›çŸ¥è¯†åº“</button>
  </view>

  <!-- å¤ä¹ å®Œæˆæç¤º -->
  <view class="finish-tip" wx:if="{{!currentItem && reviewList.length > 0 && !isLoading}}">
    <text>ğŸ‰ æœ¬æ¬¡å¤ä¹ å®Œæˆï¼</text>
    <text class="finish-stat">å…±å¤ä¹  {{reviewList.length}} ä¸ªçŸ¥è¯†ç‚¹</text>
    <button class="back-btn" bindtap="goBack">è¿”å›çŸ¥è¯†åº“</button>
  </view>
</view>