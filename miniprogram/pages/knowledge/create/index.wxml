<!-- pages/knowledge/create.wxml -->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-title">创建新知识点</view>

  <!-- 英文输入 -->
  <view class="form-item">
    <label class="form-label">英文</label>
    <input 
      class="form-input" 
      placeholder="请输入英文（如 apple）" 
      bindinput="onEnInput"
      value="{{enContent}}"
    />
    <!--将enContent的值绑定到输入框的 value 属性上-->
  </view>

  <!-- 新增：词性+释义（绑定关系） -->
  <view class="form-item">
    <label class="form-label">词性 & 释义（可添加多行）</label>
    <!-- 已添加的词性-释义列表 -->
    <view class="pos-zh-list" wx:for="{{posZhList}}" wx:key="index">
      <view class="pos-zh-item">
        <input 
          class="form-input pos-input" 
          placeholder="词性（如 n.）" 
          bindinput="onPosInput"
          data-index="{{index}}"
          value="{{item.pos}}"
        />
        <!-- data-index="{{index}}" 是一个 自定义数据属性（data-*），它的作用是 在元素上存储额外的数据 -->
        <input 
          class="form-input zh-input" 
          placeholder="对应释义" 
          bindinput="onZhItemInput"
          data-index="{{index}}"
          value="{{item.zh}}"
        />
        <button 
          class="del-btn" 
          bindtap="onDelPosZh"
          data-index="{{index}}"
        >删除</button>
      </view>
    </view>
    <!-- 添加按钮 -->
    <button class="add-btn" bindtap="onAddPosZh">+ 添加词性-释义</button>
  </view>

  <!-- 新增：例句 -->
  <view class="form-item">
    <label class="form-label">例句（可选）</label>
    <textarea 
      class="form-textarea" 
      placeholder="请输入例句（如 I have an apple.）" 
      bindinput="onExampleInput"
      value="{{exampleContent}}"
    />
  </view>

  <!-- 知识库归属（仅加 bindchange 事件，无其他修改） -->
  <view class="form-item">
    <label class="form-label">归属知识库（可多选）</label>
    <checkbox-group 
      class="library-checkbox-group" 
      bindchange="handleLibraryCheck" 
    >
      <label class="checkbox-item" wx:for="{{libraryList}}" wx:key="_id">
        <checkbox value="{{item._id}}" />
        <text class="checkbox-text">{{item.name}}</text>
      </label>
    </checkbox-group>
  </view>

  <!-- 提交按钮（校验规则更新：需至少1个词性-释义对） -->
  <button 
    class="submit-btn" 
    bindtap="onSubmit"
  >提交知识点</button>
  <!-- disabled="{{!enContent || posZhList.length === 0 || checkedLibraryIds.length === 0}}" -->
</view>